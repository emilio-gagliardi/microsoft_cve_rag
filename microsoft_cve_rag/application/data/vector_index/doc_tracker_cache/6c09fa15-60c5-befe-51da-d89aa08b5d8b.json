{"node_id": "6c09fa15-60c5-befe-51da-d89aa08b5d8b", "kb_id": "KB-5040427", "title": "July 9, 2024\u2014KB5040427 (OS Builds 19044.4651 and 19045.4651) - Microsoft Support", "text": " \nJuly 9, 2024\u2014KB5040427 (OS Builds 19044.4651 and 19045.4651) \nWindows 10 Enterprise LTSC 2021 \nWindows 10 IoT Enterprise LTSC 2021 \nWindows 10, version 22H2, all editions \nMore... \nLess \nYou\u2019re invited to try Microsoft 365 for free \nUnlock now \nRelease Date: \n7/9/2024 \nVersion: \nOS Builds 19044.4651 and 19045.4651 \n11/17/20 \nFor\u00a0information about Windows update terminology, see the article\u00a0about the\u00a0 \ntypes of Windows updates \n\u00a0and the\u00a0 \nmonthly quality update types \n.\u00a0For an overview of Windows 10, version 22H2, see its\u00a0 \nupdate history page \n. \nNote\u00a0 \nFollow\u00a0 \n@WindowsUpdate \n\u00a0to find out when new content is published to the Windows release health dashboard. \nHighlights \nThis update addresses security issues for your Windows operating system. \nImprovements \nNote\u00a0 \nTo view the list of addressed issues, click or tap the OS name to expand the collapsible section. \nWindows 10, version 22H2 \nImportant:\u00a0 \nUse EKB\u00a0 \nKB5015684 \n to update to Windows 10, version 22H2. \nThis security update includes quality improvements. Key changes include: \nThis build includes all the improvements from the supported Windows 10, version 21H2 editions. \nNo additional issues are documented for this release. \nWindows 10, version 21H2 editions: Windows 10 Enterprise LTSC 2021 and Windows 10 IoT Enterprise LTSC 2021 \nImportant:\u00a0 \nUse EKB\u00a0 \nKB5003791 \n to update to Windows 10, version 21H2 on supported editions. \nThis security update includes quality improvements that were a part of update  \nKB5039299 \n (released June 25, 2024).\u00a0Below is a summary of the key issues that this update addresses when you install this KB. If there are new features, it lists them as well. \nWindows Installer \n. When it repairs an application, the User Account Control (UAC) does not prompt for your credentials. After you install this update, the UAC will prompt for them. Because of this, you might have to update your automation scripts. Do this by adding the Shield icon. It indicates that the process requires full administrator access. To turn off the UAC prompt, set the  \nHKEY_LOCAL_MACHINE\\SOFTWARE\\Policies\\Microsoft\\Windows\\Installer\\DisableLUAInRepair \n registry value to  \n1 \n. For more information, see: \nApplication Resiliency: Unlock the Hidden Features of Windows Installer \nMachine Policies - Win32 apps \nRemote Authentication Dial-In User Service (RADIUS) protocol \n. This issue is related to MD5 collisions. For more information, see  \nKB5040268 \n. \nIf you installed earlier updates, only the new updates contained in this package will be downloaded and installed on your device. \nFor more information about security vulnerabilities, please refer to the new  \nSecurity Update Guide \n website and the  \nJuly 2024 Security Updates \n. \nWindows 10 servicing stack update (KB5039336)\u00a0- 19044.4585 and 19045.4585 \nThis update makes quality improvements to the servicing stack, which is the component that installs Windows updates. Servicing stack updates (SSU) ensure that you have a robust and reliable servicing stack so that your devices can receive and install Microsoft updates. \nKnown issues in this update \nSymptom \nWorkaround \nAfter you install  \nKB5034203 \n\u00a0(dated 01/23/2024) or later updates, some Windows devices that use the  \nDHCP Option 235 \n to discover  \nMicrosoft Connected Cache (MCC) \n nodes in their network might be unable to use those nodes. Instead, these Windows devices will download updates and apps from the public internet. IT administrators also see increased download traffic on their internet routes. \nThose of you who use the Home edition of Windows are not likely to experience this issue. MCC and DHCP Option 235 are typically used in enterprise environments. \nOption \n1: \n Configure Microsoft Connected Cache endpoint in  \nDOCacheHost \n policy as indicated in  \nCache hostname \n. Additionally,  \nDOCacheHostSource \nhas to be set to  \n1 \nor removed as indicated in  \nCache hostname source \n. By default, the  \nDOCacheHost and DOCacheHostSource \n policies have no value. \nOption \n2: \n You can mitigate this issue using Group Policies available through our support channel. Organizations can request help at  \nSupport for business \n. \nWe are working on a resolution and will provide an update in an upcoming release. \nAfter installing this update, you might be unable to  \nchange your user account profile picture \n. \nWhen attempting to change a profile picture by selecting the button  \nStart \n>  \nSettings  \n> \n Account  \n> \n Your info \n and, under \n Create your picture \n, clicking on  \nBrowse for one,  \nyou might receive an error message with error code 0x80070520. \nWe are working on a resolution and will provide an update in an upcoming release. \nHow to get this update \nBefore you install this update \nMicrosoft now combines the latest servicing stack update (SSU) for your operating system with the latest cumulative update (LCU).\u00a0For general information about SSUs,\u00a0see  \nServicing stack updates \n\u00a0and\u00a0 \nServicing Stack Updates (SSU): Frequently Asked Questions \n. \nPrerequisite: \nBased on your installation scenario, choose one of the following: \nFor offline OS image servicing: \nIf your image does not have the\u00a0March 22, 2022 ( \nKB5011543 \n) or later LCU, you  \nmust  \ninstall the special standalone May 10, 2022 SSU ( \nKB5014032 \n) before installing this update. \nFor Windows Server Update Services (WSUS) deployment or when installing the standalone package from Microsoft Update Catalog: \nIf your devices do not have the May 11, 2021\u00a0( \nKB5003173 \n)\u00a0or later LCU, you  \nmust  \ninstall the special standalone August 10, 2021 SSU ( \nKB5005260 \n) before installing this update. \nInstall this update \nTo install this update, use one of the following Windows and Microsoft release channels. \nWindows Update \nBusiness \nCatalog \nServer Update Services \nAvailable \nNext Step \nYes \nNone. This update will be downloaded and installed automatically from Windows Update and Microsoft Update. \nAvailable \nNext Step \nYes \nNone. This update will be downloaded and installed automatically from Windows Update for Business in accordance with configured policies. \nAvailable \nNext Step \nYes \nTo get the standalone package for this update, go to the\u00a0 \nMicrosoft Update Catalog \n\u00a0website. \nAvailable \nNext Step \nYes \nThis update will automatically sync\u00a0with Windows Server Update Services (WSUS) if you configure  \nProducts and Classifications \n as follows: \nProduct \n: Windows 10, version 1903 and later \nClassification \n: Security Updates \nIf you want to remove the LCU \nTo remove the LCU after installing the combined SSU and LCU package, use the  \nDISM/Remove-Package \n command line option with the LCU package name as the argument. You can find the package name\u00a0by using this command:  \nDISM /online /get-packages \n. \nRunning  \nWindows Update Standalone Installer \n ( \nwusa.exe \n) with the  \n/uninstall  \nswitch on the combined package will not work because the combined package contains the SSU. You cannot remove the SSU from the system after installation. \nFile information \nFor a list of the files that are provided in this update, download the\u00a0 \nfile information for cumulative update 5040427 \n. \nFor a list of the files that are provided in the servicing stack update, download the\u00a0 \nfile information for the SSU (KB5039336) - versions 19044.4585 and 19045.4585 \n. \nSUBSCRIBE RSS FEEDS \nNeed more help? \nWant more options? \nDiscover \nCommunity \nExplore subscription benefits, browse training courses, learn how to secure your device, and more. \nMicrosoft 365 subscription benefits \nMicrosoft 365 training \nMicrosoft security \nAccessibility center \nCommunities help you ask and answer questions, give feedback, and hear from experts with rich knowledge. \nAsk the Microsoft Community \nMicrosoft Tech Community \nWindows Insiders \nMicrosoft 365 Insiders \n", "published": "2024-07-09T00:00:00", "product_build_id": "02b22c07-2b1d-53d9-788d-895a56ded841", "build_number": [10, 0, 19044, 4651], "excluded_embed_metadata_keys": ["node_label", "build_number", "node_id", "product_build_id", "product_build_ids", "cve_ids"], "article_url": "https://support.microsoft.com/help/5040427", "summary": "KB5040427 is a critical security update released on July 9, 2024, affecting Windows 10 Enterprise LTSC 2021, IoT Enterprise LTSC 2021, and all editions of Windows 10, version 22H2 (builds 19044.4651 and 19045.4651). The update addresses high-impact vulnerabilities such as those related to the Windows Installer (UAC prompting issues) and Remote Authentication Dial-In User Service (RADIUS) concerning MD5 collisions. Prerequisites for installation include specific servicing stack updates, such as KB5014032 for offline imaging or KB5005260 for WSUS deployment. The update also includes quality improvements derived from previous releases with no documented additional issues.\n\n**Technical Breakdown**\n\n**Vulnerabilities and Exploits**:\n- This update addresses high-impact vulnerabilities related to:\n  - Windows Installer: Issues with User Account Control (UAC) that previously did not prompt for credentials during application repairs.\n  - Remote Authentication Dial-In User Service (RADIUS) protocol: High-impact issues related to MD5 collisions.\n\n**Commands and Configuration Changes**:\n- To ensure UAC prompts during application repair:\n  ```\n  [Registry Key]\n  `HKEY_LOCAL_MACHINE\\SOFTWARE\\Policies\\Microsoft\\Windows\\Installer\\DisableLUAInRepair` = `1`\n  ```\n\n**Known Issues and Workarounds**:\n- **MCC/DHCP Option 235 Discovery Issue**\n  - Impact: Affects enterprise environments.\n  - Resolution: Configure Microsoft Connected Cache endpoint in `DOCacheHost` policy, set to `<MCC Endpoint>`, and configure `DOCacheHostSource` to `1` or remove it.\n    ```\n    [Registry Key]\n    `HKEY_LOCAL_MACHINE\\SOFTWARE\\Policies\\Microsoft\\DOCacheHost` = `<MCC Endpoint>`\n    ```\n\n- **Profile Picture Error (0x80070520)**\n  - Trigger: Attempt to change user account profile picture.\n  - Resolution: Under investigation, awaiting an update.\n\n**Installation Process and Prerequisites**:\n1. **For offline OS image servicing**: If your image lacks the March 22, 2022 (KB5011543) or later LCU, install standalone May 10, 2022 SSU (KB5014032) prior to the update.\n2. **For WSUS deployment**: If devices lack the May 11, 2021 (KB5003173) LCU or later, install standalone August 10, 2021 SSU (KB5005260) before the update.\n3. **Update Channels**:\n   - Windows Update: Automatic download and installation.\n   - Windows Update for Business: Automatic installation as per configured policies.\n   - Microsoft Update Catalog: Standalone package available for manual installation.\n   - WSUS: Sync setup with products classified as Windows 10, version 1903 and later for security updates.\n\n**Uninstallation Instructions**:\n- To remove the LCU post-installation:\n  ```\n  [Powershell]\n  ```powershell\n  DISM /online /remove-package /packagename:<LCU_package_name>\n  ```\n- Avoid using `wusa.exe /uninstall`, as this will not work with combined packages containing SSUs.", "metadata": {"product_build_ids": ["6b8913f3-7bad-1774-0775-adee9508ce96", "02b22c07-2b1d-53d9-788d-895a56ded841", "353af6c6-7510-44db-7e2b-7f89def138b7", "b157dfb8-ef43-d640-3131-528b8a92b6c6"], "cve_ids": ["CVE-2024-21417", "CVE-2024-26184", "CVE-2024-28899", "CVE-2024-30013", "CVE-2024-30071", "CVE-2024-30079", "CVE-2024-30081", "CVE-2024-30098", "CVE-2024-35270", "CVE-2024-3596", "CVE-2024-37969", "CVE-2024-37970", "CVE-2024-37971", "CVE-2024-37972", "CVE-2024-37973", "CVE-2024-37974", "CVE-2024-37975", "CVE-2024-37981", "CVE-2024-37984", "CVE-2024-37986", "CVE-2024-37987", "CVE-2024-37988", "CVE-2024-37989", "CVE-2024-38010", "CVE-2024-38011", "CVE-2024-38013", "CVE-2024-38017", "CVE-2024-38019", "CVE-2024-38022", "CVE-2024-38025", "CVE-2024-38027", "CVE-2024-38028", "CVE-2024-38030", "CVE-2024-38032", "CVE-2024-38033", "CVE-2024-38034", "CVE-2024-38041", "CVE-2024-38043", "CVE-2024-38047", "CVE-2024-38048", "CVE-2024-38049", "CVE-2024-38050", "CVE-2024-38051", "CVE-2024-38052", "CVE-2024-38053", "CVE-2024-38054", "CVE-2024-38055", "CVE-2024-38056", "CVE-2024-38057", "CVE-2024-38058", "CVE-2024-38059", "CVE-2024-38060", "CVE-2024-38061", "CVE-2024-38062", "CVE-2024-38064", "CVE-2024-38065", "CVE-2024-38066", "CVE-2024-38068", "CVE-2024-38069", "CVE-2024-38070", "CVE-2024-38079", "CVE-2024-38085", "CVE-2024-38091", "CVE-2024-38101", "CVE-2024-38102", "CVE-2024-38104", "CVE-2024-38105", "CVE-2024-38112", "CVE-2024-38517", "CVE-2024-39684"], "excluded_llm_metadata_keys": null, "node_label": "KBArticle", "update_package_url": "https://catalog.update.microsoft.com/Search.aspx?q=KB5040427", "etl_processing_status": {"document_processed": true, "entities_extracted": false, "graph_prepared": false, "vector_prepared": false, "last_processed_at": null, "processing_version": "1.0"}}, "added_at": "2025-01-21T17:57:25.038346", "last_updated": "2025-01-29T12:29:31.540762"}